# Phase 3 creates deployments for shard 1 (root)
#
# helm upgrade \
#  --install \
#  --values ./hack/kind-values-phase3.yaml \
#  --namespace kcp-alpha \
#  --create-namespace \
#  alpha ./charts/kcp
#
fullnameOverride: beta
externalHostname: "kcp.dev.local"
etcd:
  enabled: true
kcp:
  tag: main
  enabled: true
  hostAliases:
    enabled: true
    values:
    - hostnames:
        - "kcp.dev.local"
      ip: "10.96.180.249"
  v: 8
  tokenAuth:
    enabled: true
    fileName: auth-token.csv
    config: |
        734c8b1b-6622-49be-a9bd-aa2a79f6e1c6,external-logical-cluster-admin,1111-1111-1111-1111,"system:kcp:external-logical-cluster-admin"
        d146d43d-cee3-44e3-8a22-a89f707bf577,system-kcp-admin,5555-5555-5555-5555,"system:kcp:admin"
        81dbe8dc-ae4c-454b-ad87-3ec18eab568b,system-masters,6666-6666-6666-6666,"system:masters"
  batteries:
    - workspace-types
    - metrics-viewer
  extraFlags:
  - --feature-gates=WorkspaceMounts=true
  homeWorkspaces:
    enabled: true
externalCache:
  enabled: true
  cacheInternalHostname: "cache-cache.kcp-cache.svc"
sharding:
  enabled: true
  isRoot: false # set this to true for the first (root) shard, false for all other shards.
  rootShardInternalHostname: "alpha.kcp-alpha.svc.cluster.local"
caBundle:
  enabled: false
  configMapName: kcp.dev.local
  configMapKey: root-certs.pem
oidc:
  enabled: true
  issuerUrl: https://idp.dev.local:6443
  clientId: kcp-dev
  groupClaim: groups
  usernameClaim: email
  usernamePrefix: kcp-dev-idp-
  groupsPrefix: kcp-dev-idp-
  caSecretName: dex-pki-ca
